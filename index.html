<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Teacher Timetables</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 20px;
      background: #f9f9f9;
    }
    .table-wrapper {
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      margin-bottom: 30px;
      padding: 20px;
    }
    .table-wrapper h2 {
      margin-top: 0;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      table-layout: fixed;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 6px;
      text-align: center;
      vertical-align: middle;
      word-wrap: break-word;
    }
    th {
      background: #e3f2fd;
      font-weight: bold;
    }
    tbody th {
      background: #bbdefb;
      text-align: left;
    }
  </style>
</head>
<body>

  <div id="tables-container"></div>

  <script>
    fetch('teacher_schedules.json')
      .then(res => {
        if (!res.ok) throw new Error(\`HTTP \${res.status} \${res.statusText}\`);
        return res.json();
      })
      .then(data => {
        const container = document.getElementById('tables-container');
        const timeSlots = data.timeSlots;
        const teachers  = data.teachers;

        // for each teacher in your JSON...
        Object.keys(teachers).forEach(teacherName => {
          const schedule = teachers[teacherName];

          // wrapper & heading
          const wrapper = document.createElement('div');
          wrapper.className = 'table-wrapper';
          const title = document.createElement('h2');
          title.textContent = 'Nama Guru: ' + teacherName;
          wrapper.appendChild(title);

          // build table
          const table = document.createElement('table');
          const thead = document.createElement('thead');
          const trHead = document.createElement('tr');

          // "Day" column header
          const thDay = document.createElement('th');
          thDay.textContent = 'Day';
          trHead.appendChild(thDay);

          // time-slot headers
          timeSlots.forEach(slot => {
            const th = document.createElement('th');
            // split on hyphen OR en-dash, ignoring surrounding spaces
            const [start, end] = slot.split(/\s*[–-]\s*/);
            th.innerHTML = start + '<br>–<br>' + end;
            trHead.appendChild(th);
          });

          thead.appendChild(trHead);
          table.appendChild(thead);

          // days of the week in order
          const dayKeys   = ['Mo','Tu','We','Th','Fr'];
          const dayLabels = ['Monday','Tuesday','Wednesday','Thursday','Friday'];

          const tbody = document.createElement('tbody');
          dayKeys.forEach((d, i) => {
            const tr = document.createElement('tr');
            const th = document.createElement('th');
            th.textContent = dayLabels[i];
            tr.appendChild(th);

            timeSlots.forEach(slot => {
              const td = document.createElement('td');
              // grab that slot's array (or empty array if none)
              const entries = (schedule[d] && schedule[d][slot]) || [];
              if (entries.length) {
                td.innerHTML = entries.map(e =>
                  // class first, then subject, then venue if present
                  [e.class, e.subject, e.venue]
                    .filter(Boolean)
                    .join('<br>')
                ).join('');
              }
              tr.appendChild(td);
            });

            tbody.appendChild(tr);
          });

          table.appendChild(tbody);
          wrapper.appendChild(table);
          container.appendChild(wrapper);
        });
      })
      .catch(err => {
        console.error('Error loading data:', err);
        const container = document.getElementById('tables-container');
        container.innerHTML = '<p style="color:red;">Error loading data: ' +
                              err.message +
                              '</p>';
      });
  </script>

</body>
</html>